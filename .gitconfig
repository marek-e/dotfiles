
[user]
    name = Marek Elmayan
    email = marek.elmayan@theodo.com
    useConfigOnly = true

[init]
    defaultBranch = main

# Never create merge commits on pull; keep history linear
[pull]
    rebase = true
    ff = only
    autoStash = true

[rebase]
    autosquash = true
    updateRefs = true
    autostash = true

[rerere]
    enabled = true

# Safer pushes and better tag behavior
[push]
    default = current
    autoSetupRemote = true
    followTags = true
    autoSetupRemote = true

[fetch]
    prune = true
    pruneTags = true
    recurseSubmodules = on-demand

# Helpful diffs & merges
[diff]
    algorithm = histogram
    colorMoved = default
    renames = true

[merge]
    conflictStyle = zdiff3

# Colors & status
[color]
    ui = auto

[status]
    submoduleSummary = true
    showUntrackedFiles = all

# Your editor & line endings (pick ONE of the core blocks below for your OS)
[core]
    editor = code --wait
    excludesfile = ~/.gitignore_global
    safecrlf = warn
    # macOS/Linux:
    autocrlf = input
    pager = delta

[interactive]
    diffFilter = delta --color-only

[delta]
    navigate = true  # use n and N to move between diff sections
    dark = true      # or light = true, or omit for auto-detection

# Quality-of-life
[tag]
    sort = version:refname

[gc]
    writeCommitGraph = true
    pruneExpire = 30.days

[help]
    autocorrect = 10

[alias]
    autofixup = "!f() { \
        SELECTED=$(git log --date=relative --decorate --color=always \
            --pretty=format:'%C(yellow)%h %C(blue)%ad%C(reset) %C(green)%an%C(reset) %C(red)%d%C(reset) %s' \
            | fzf --ansi --height=80% --reverse --border --margin=1 --padding=1 \
                --prompt='fixup > ' --header='Select a commit (ENTER to proceed)' \
                --info=inline --pointer='▶' --marker='✓'); \
        [ -z \"$SELECTED\" ] && return; \
        COMMIT_HASH=$(echo \"$SELECTED\" | sed -E 's/\\x1b\\[[0-9;]*m//g' | awk '{print $1}'); \
        git commit --fixup $COMMIT_HASH; \
        GIT_SEQUENCE_EDITOR=: git rebase --autostash --autosquash -i $COMMIT_HASH^; \
        }; f"
    autofixup-no-verif = "!f() { \
        SELECTED=$(git log --date=relative --decorate --color=always \
            --pretty=format:'%C(yellow)%h %C(blue)%ad%C(reset) %C(green)%an%C(reset) %C(red)%d%C(reset) %s' \
            | fzf --ansi --height=80% --reverse --border --margin=1 --padding=1 \
                --prompt='fixup > ' --header='Select a commit (ENTER to proceed)' \
                --info=inline --pointer='▶' --marker='✓'); \
        [ -z \"$SELECTED\" ] && return; \
        COMMIT_HASH=$(echo \"$SELECTED\" | sed -E 's/\\x1b\\[[0-9;]*m//g' | awk '{print $1}'); \
        git commit --fixup $COMMIT_HASH --no-verify; \
        GIT_SEQUENCE_EDITOR=: git rebase --autostash --autosquash -i $COMMIT_HASH^; \
        }; f"
[coderabbit]
	machineId = cli/2fd2e9a0e2824636b56cdb3d65279175
